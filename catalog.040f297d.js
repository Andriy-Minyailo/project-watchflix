var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},o={},a=e.parcelRequire1827;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in o){var a=o[e];delete o[e];var r={id:e,exports:{}};return t[e]=r,a.call(r.exports,r,r.exports),r.exports}var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){o[e]=t},e.parcelRequire1827=a),a("bTcpz"),a("hYpm4");var r=a("hY6V0"),n=a("3huUq"),c=a("7o4ng");const l={cardContainer:document.querySelector(".card")},s=new(0,r.RequestServer);!async function(){try{await(0,c.requestGenre)();const e=await s.trendingWeek(),{results:t}=e.data,o=(0,n.markup)(t);l.cardContainer.innerHTML=o}catch(e){console.log(e)}}(),a("eEHR3"),a("jIklc");n=a("3huUq");const i=new(0,(r=a("hY6V0")).RequestServer),u=document.querySelector("#catalog-search-form"),d=document.querySelector("#catalog-search-input"),m=document.querySelector("#catalog-year-select"),g=document.querySelector("#catalog-genre-select"),y=document.querySelector("#catalog-country-select"),h=document.querySelector("#catalog-list"),f=document.querySelector("#catalog-not-found-message"),p=document.querySelector("#catalog-error-message");let v={searchQuery:void 0,year:void 0,genre:void 0,country:void 0};const S={hideClassName:"catalog__list--hidden",show(){h.classList.remove(this.hideClassName)},hide(){h.classList.add(this.hideClassName)}},q={hideClassName:"catalog__message--hidden",show(){f.classList.remove(this.hideClassName)},hide(){f.classList.add(this.hideClassName)}},w={hideClassName:"catalog__message--hidden",show(){p.classList.remove(this.hideClassName)},hide(){p.classList.add(this.hideClassName)}},_=(e,t,o)=>{const a=document.createElement("option");a.value=t,a.innerHTML=o??t,e.append(a)};const C=async e=>{try{const t=(e=>{const t=e.searchQuery,o=e.year,a=e.genre,r=e.country;let n="";return t&&(n+=t),o&&(n+=`&year=${o}`),a&&(n+=`&genre=${a}`),r&&(n+=`&country=${r}`),n})(e);return(await i.searchMovies(t)).data.results}catch(e){console.log(e),S.hide(),w.show()}},L=async e=>{if(e.length){const t=(0,n.markup)(e);w.hide(),q.hide(),h.innerHTML=t,S.show()}else S.hide(),q.show()};(()=>{for(let e=(new Date).getFullYear();e>=2e3;e--)_(m,e)})(),(async()=>{(await i.movieGenre()).data.genres.forEach((e=>_(g,e.id,e.name)))})(),u.addEventListener("submit",(async e=>{e.preventDefault(),v={searchQuery:d.value,year:document.querySelector("#catalog-year-select").value,genre:document.querySelector("#catalog-genre-select").value,country:document.querySelector("#catalog-country-select").value};const t=await C(v);(()=>{const e="catalog__search-form-input--hidden";m.classList.remove(e),g.classList.remove(e),y.classList.remove(e)})(),L(t)}));const b=new(0,(r=a("hY6V0")).RequestServer),N=(document.querySelector(".wrapper"),{cardsInfo:[],localStorage:E("my-library")?function(e){try{return JSON.parse(e)}catch(e){console.log(e)}}(E("my-library")):[]});function x(e,t){return e.closest(t).dataset.id}function T(e,t){localStorage.setItem(e,t)}function E(e){localStorage.getItem(e)}function k(e){try{return JSON.stringify(e)}catch(e){console.log(e)}}console.log("text",N.localStorage),0==N.localStorage.length&&T("my-library",k([])),a("6pZM0"),a("OcCik"),a("eEHR3"),a("iagwT"),a("8GYDQ"),a("6pZM0"),a("jIklc"),a("8Yq9A"),async function(e=603692){const t=await async function(e){const t=await b.movieDetails(e),{data:o}=t;return o}(e);console.log("DATA",t),N.cardsInfo.push(t),await function(e){const t=document.querySelector(".modal-card-info"),o=document.querySelector(".modal__img-modal-card-info"),a=document.querySelector(".modal-info__name"),r=document.querySelector("._vote"),n=document.querySelector("._votes"),c=document.querySelector(".modal-info-right__text-popoparity"),l=document.querySelector(".modal-info-right__text-genre"),s=document.querySelector(".modal-info-about__text-overwiew-about");console.log("Abount",s);const{id:i=603692,poster_path:u="/9JBEPLTPSm0d1mbEcLxULjJq9Eh.jpg",title:d="",vote_average:m="",vote_count:g="",popularity:y="",genres:h="",overview:f=""}=e;img="https://image.tmdb.org/t/p/original"+u,t.dataset.id=i,o.src=img,o.alt=d,a.textContent=d,r.textContent=m,n.textContent=g,c.textContent=y,l.textContent=[...h].map((e=>e.name)).join(" "),s.textContent=f}(t),await void document.querySelector(".btn__add-to-library").addEventListener("click",(function(e){const t=e.target;let o=null;"BUTTON"==t.tagName&&(o=x(t,".modal-card-info")),"SPAN"==t.tagName&&(o=x(t,".modal-card-info")),function(e){if(!N.localStorage.includes(e))return N.localStorage.push(e),!0}(+o)&&function(e,t){T(e,k(t))}("my-library",N.localStorage)}))}(603692);
//# sourceMappingURL=catalog.040f297d.js.map
