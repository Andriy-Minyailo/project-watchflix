{"mappings":"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","sources":["src/js/modal.js","src/js/toggel.js","src/js/elementCard.js","src/js/nameGenres.js","src/js/markup.js"],"sourcesContent":["!function(e){\"function\"!=typeof e.matches&&(e.matches=e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||function(e){for(var t=this,o=(t.document||t.ownerDocument).querySelectorAll(e),n=0;o[n]&&o[n]!==t;)++n;return Boolean(o[n])}),\"function\"!=typeof e.closest&&(e.closest=function(e){for(var t=this;t&&1===t.nodeType;){if(t.matches(e))return t;t=t.parentNode}return null})}(window.Element.prototype);\n\n\ndocument.addEventListener('DOMContentLoaded', function() {\n\n   /* Записываем в переменные массив элементов-кнопок и подложку.\n      Подложке зададим id, чтобы не влиять на другие элементы с классом overlay*/\n   var modalButtons = document.querySelectorAll('.js-open-modal'),\n       overlay      = document.querySelector('.js-overlay-modal'),\n       closeButtons = document.querySelectorAll('.js-modal-close');\n\n\n   /* Перебираем массив кнопок */\n   modalButtons.forEach(function(item){\n\n      /* Назначаем каждой кнопке обработчик клика */\n      item.addEventListener('click', function(e) {\n\n         /* Предотвращаем стандартное действие элемента. Так как кнопку разные\n            люди могут сделать по-разному. Кто-то сделает ссылку, кто-то кнопку.\n            Нужно подстраховаться. */\n         e.preventDefault();\n\n         /* При каждом клике на кнопку мы будем забирать содержимое атрибута data-modal\n            и будем искать модальное окно с таким же атрибутом. */\n         var modalId = this.getAttribute('data-modal'),\n             modalElem = document.querySelector('.modal[data-modal=\"' + modalId + '\"]');\n\n\n         /* После того как нашли нужное модальное окно, добавим классы\n            подложке и окну чтобы показать их. */\n         modalElem.classList.add('active');\n         overlay.classList.add('active');\n      }); // end click\n\n   }); // end foreach\n\n\n   closeButtons.forEach(function(item){\n\n      item.addEventListener('click', function(e) {\n         var parentModal = this.closest('.modal');\n\n         parentModal.classList.remove('active');\n         overlay.classList.remove('active');\n      });\n\n   }); // end foreach\n\n\n    document.body.addEventListener('keyup', function (e) {\n        var key = e.keyCode;\n\n        if (key == 27) {\n\n            document.querySelector('.modal.active').classList.remove('active');\n            document.querySelector('.overlay').classList.remove('active');\n        };\n    }, false);\n\n\n    overlay.addEventListener('click', function() {\n        document.querySelector('.modal.active').classList.remove('active');\n        this.classList.remove('active');\n    });\n\n\n\n\n}); // end ready","const toggleThemeBtn = document.getElementById('toggel-btn')\nconst toggleThemeImage = document.getElementById('toggel-svg')\n\ntoggleThemeBtn.addEventListener('click', () => {\n   if (document.body.classList.contains('light')) {\n   document.body.classList.remove('light')\n   toggleThemeImage.use ='./svg/symbol-defs.svg#icon-sun'\n   localStorage.theme = 'dark'\n   } else {\n   document.body.classList.add('light')\n   toggleThemeImage.use ='./svg/symbol-defs.svg#icon-moon'\n   localStorage.theme = 'light'\n   }\n})\n\nif(localStorage.theme === 'light') {\n   document.body.classList.add('light')\n   toggleThemeImage.use ='./svg/symbol-defs.svg#icon-moon'\n}\n\n\n","import { RequestServer } from \"./requestServer\";\nimport { markup } from './markup';\nimport { requestGenre } from './nameGenres'\n\nconst refs = {\n    cardContainer: document.querySelector('.card')\n}\nconst requestServer = new RequestServer();\n\nasync function ontrendingWeek() {\n  \n    try {\n        const genres = await requestGenre();\n        const responseWeek = await requestServer.trendingWeek();\n        const { results } = responseWeek.data;\n        // console.log(results);\n        // const test = results.slice(0, 3);\n        const markupCard = markup(results);\n\n        refs.cardContainer.innerHTML =  markupCard;\n    } catch(error) {\n    console.log(error);\n  };\n}\nontrendingWeek();\n\n","import { RequestServer } from \"./requestServer\";\nconst requestServer = new RequestServer();\nlet genresList;\n\nexport async function requestGenre() {\n      try {\n        const responsGenre = await requestServer.movieGenre();\n        const { genres } = responsGenre.data;\n        genresList = genres.reduce((acc, { id, name }) => {\n    acc[id] = name;\n    return acc;\n  }, {});\n    } catch(error) {\n    console.log(error);\n  };\n}\n// requestGenre();\n\nexport function nameGenres(arrayId) {\n     const result = arrayId.map(id => genresList[id]);\n        if (result.length > 2) {\n    result.splice(2);\n    } else if (result.length === 0) {\n    result.push(\"no genres\")\n    }\n    // console.log(result);\n  return result\n\n}\n\n","import { nameGenres } from './nameGenres';\n\nexport function markup(results) {\n \n  const markupCard = results.map(\n      ({\n        poster_path,\n        original_title = '',\n        genre_ids,\n        overview = '',\n        release_date = '',\n        vote_average = '',\n        id\n      }) => {\n        let releaseDate;\n        if (!release_date) {\n          releaseDate = 'no date';\n        } else {\n          releaseDate = release_date.substring(0, 4);\n        }\n        let path = `https://image.tmdb.org/t/p/w500${poster_path}`;\n        if (!poster_path) {\n          path = 'https://picsum.photos/500/750';\n        }\n      let rating = vote_average.toFixed(1);\n        return `<li class=\"card__item list\" id=\"${id}\">\n            <img src='${path}' loading=\"lazy\" alt=\"${overview}\" class=\"card__img\" />\n            <div class=\"container-info\">\n            <h2 class=\"card__title\">${original_title}</h2>\n            <p class=\"card__desc\">${nameGenres(genre_ids).join(', ')} | ${releaseDate}</p>\n            <p class=\"card__rating\">${rating}</p>\n            </div>\n            </li>`;\n      }\n    )\n    .join('');\n\n  return markupCard;\n}        "],"names":["e1","window","Element","prototype","matches","msMatchesSelector","mozMatchesSelector","webkitMatchesSelector","e","t","this","o","document","ownerDocument","querySelectorAll","n","Boolean","closest","nodeType","parentNode","addEventListener","overlay","querySelector","closeButtons","modalButtons","forEach","item","modalId","classList","add","remove","body","keyCode","$2dd1f083a4cc6ff4$var$toggleThemeBtn","getElementById","$2dd1f083a4cc6ff4$var$toggleThemeImage","contains","use","localStorage","theme","$27ed519e7723fb0c$var$genresList","$bpxeT","parcelRequire","$27ed519e7723fb0c$var$requestServer","RequestServer","$27ed519e7723fb0c$export$77e97b00fc29ddbb","$27ed519e7723fb0c$var$_requestGenre","apply","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","responsGenre","genres","movieGenre","_ctx","sent","data","reduce","acc","param","id","name","console","log","t0","$1457a8b41868a85b$export$7b40ce885114f0a6","results","map","releaseDate","poster_path","_original_title","original_title","genre_ids","_overview","overview","_release_date","release_date","_vote_average","vote_average","substring","path","concat","arrayId","result","rating","toFixed","length","splice","push","join","$6bf3d6d00e56e4f2$var$refs","cardContainer","$6bf3d6d00e56e4f2$var$requestServer","$cFGTe","$6bf3d6d00e56e4f2$var$_ontrendingWeek","responseWeek","markupCard","trendingWeek","innerHTML","$6bf3d6d00e56e4f2$var$ontrendingWeek"],"version":3,"file":"catalog.01f389c1.js.map"}