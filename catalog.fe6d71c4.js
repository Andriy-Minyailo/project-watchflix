var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},t={},r=e.parcelRequire1827;null==r&&((r=function(e){if(e in a)return a[e].exports;if(e in t){var r=t[e];delete t[e];var s={id:e,exports:{}};return a[e]=s,r.call(s.exports,s,s.exports),s.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,a){t[e]=a},e.parcelRequire1827=r),r("bTcpz"),r("hYpm4");var s=r("hY6V0"),o=r("3huUq"),n=r("7o4ng");const c={cardContainer:document.querySelector(".card")},l=new(0,s.RequestServer);!async function(){try{await(0,n.requestGenre)();const e=await l.trendingWeek(),{results:a}=e.data,t=(0,o.markup)(a);c.cardContainer.innerHTML=t}catch(e){console.log(e)}}(),r("eEHR3"),r("jIklc");o=r("3huUq");const i=new(0,(s=r("hY6V0")).RequestServer),d=document.querySelector("#catalog-search-form"),u=document.querySelector("#catalog-search-input"),h=document.querySelector("#catalog-year-select"),m=document.querySelector("#catalog-genre-select"),g=document.querySelector("#catalog-country-select"),y=document.querySelector("#catalog-list"),v=document.querySelector("#catalog-not-found-message"),f=document.querySelector("#catalog-error-message");let p=1,w={searchQuery:void 0,year:void 0,genre:void 0,country:void 0};const q={hideClassName:"catalog__list--hidden",show(){y.classList.remove(this.hideClassName)},hide(){y.classList.add(this.hideClassName)}},L={hideClassName:"catalog__message--hidden",show(){v.classList.remove(this.hideClassName)},hide(){v.classList.add(this.hideClassName)}},S={hideClassName:"catalog__message--hidden",show(){f.classList.remove(this.hideClassName)},hide(){f.classList.add(this.hideClassName)}},C=(e,a,t)=>{const r=document.createElement("option");r.value=a,r.innerHTML=t??a,e.append(r)};const N=async e=>{try{const a=(e=>{const a=e.searchQuery,t=e.year,r=e.genre,s=e.country;let o="";return a&&(o+=a),t&&(o+=`&year=${t}`),r&&(o+=`&genre=${r}`),s&&(o+=`&country=${s}`),o})(e);return(await i.searchMovies(a)).data.results}catch(e){console.log(e),q.hide(),S.show()}},_=async e=>{if(e.length){const a=(0,o.markup)(e);S.hide(),L.hide(),y.innerHTML=a,q.show()}else q.hide(),L.show()};(()=>{for(let e=(new Date).getFullYear();e>=2e3;e--)C(h,e)})(),(async()=>{(await i.movieGenre()).data.genres.forEach((e=>C(m,e.id,e.name)))})(),d.addEventListener("submit",(async e=>{e.preventDefault(),w={searchQuery:u.value,year:document.querySelector("#catalog-year-select").value,genre:document.querySelector("#catalog-genre-select").value,country:document.querySelector("#catalog-country-select").value};const a=await N(w);(()=>{const e="catalog__search-form-input--hidden";h.classList.remove(e),m.classList.remove(e),g.classList.remove(e)})(),_(a)})),pagination.on("afterMove",(async e=>{p=e.page;const a=await N(w);await _(a)}));var M=r("7VqXa");r("6pZM0"),r("OcCik"),r("eEHR3"),r("iagwT"),r("8GYDQ"),r("6pZM0"),r("jIklc"),r("8Yq9A"),(0,M.startRenderModalInfo)(603692);
//# sourceMappingURL=catalog.fe6d71c4.js.map
