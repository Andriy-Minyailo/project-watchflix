{"mappings":"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","sources":["src/js/test.js","src/js/menu.js","src/js/upcoming.js"],"sourcesContent":["\n\n// Приклад роботи з бекендом\nimport { RequestServer } from \"./requestServer\";\n\nconst requestServer = new RequestServer();\n\nasync function test() {\n    try {\n        const response = await requestServer.trendingDay();\n        console.log(response);\n    \n    } catch (error) {\n        console.error(error);\n    }\n}\n\ntest();\n","\n(() => {\n  const menu = document.querySelector('.js-menu-container');\n  const openMenuBtn = document.querySelector('.js-open-menu');\n  const closeMenuBtn = document.querySelector('.js-close-menu');\n\n  openMenuBtn.addEventListener('click', toggleMenu);\n  closeMenuBtn.addEventListener('click', toggleMenu);\n\n\n  function toggleMenu() {\n    menu.classList.toggle('visually-hidden');\n  }\n  \n})();\n\n// ---------------------------------\n\n// document.addEventListener(\"DOMContentLoaded\", function() {\n//   document.getElementById(\"header-menu\").addEventListener(\"click\", function() {\n//     document.querySelector(\"header-menu\").classList.toggle(\"open\")\n//   })\n// })","import { RequestServer } from './requestServer';\nimport { KEY_MOVIE_LIST } from \"./localStorage\";\nimport { getMovieList } from \"./localStorage\";\nimport { saveMovieList } from \"./localStorage\";\nimport { loadMoveList } from \"./localStorage\";\n\nconst loadingMessageEl = document.querySelector('#upcoming-loading-message');\nconst noDataMessageEl = document.querySelector('#upcoming-no-data-message');\nconst errorMessageEl = document.querySelector('#upcoming-error-message');\nconst movieEl = document.querySelector('#upcoming-movie');\nconst btn = document.querySelector('#upcoming-remind-btn');\n\nconst requestServer = new RequestServer();\nlet currenyMovie;\nlet filmIndex;\nconst stateButtonUpc = {\n    addText: 'Remind me',\n    removeText: 'Delete from my library',\n    localMarkup: '',\n    currentStateButton: true\n}\n\nconst fetchUpcoming = async () => {\n  try {\n    const response = await requestServer.newFilms();\n\n    await fillData(response);\n\n    hideLoadingMessage();\n    showMovie();\n  } catch (error) {\n    console.error(error);\n\n    hideLoadingMessage();\n    showErrorMessage();\n  }\n};\n\nconst fillData = async response => {\n  const movies = response.data.results;\n  const moviesLength = movies.length;\n\n  if (!moviesLength) {\n    hideLoadingMessage();\n    showNoDataMessage();\n\n    return;\n  }\n\n  const movie = movies[Math.round(Math.random() * (moviesLength - 1))];\n \n\n\n  console.log(movie.id);\n  fillTitle(movie.original_title);\n  fillBackdrop(movie.backdrop_path);\n  fillReleaseDate(movie.release_date);\n  fillVote(movie.vote_average, movie.vote_count);\n  fillPopularity(movie.popularity);\n\n  await fillGenre(movie);\n\n  fillAbout(movie.overview);\n\n const { poster_path,\n    original_title = '',\n    overview = '',\n    release_date = '',\n    vote_average = '',\n    id } = movie;\n\n  checkMovieLocalStorage(id);\n  const genreEl = document.querySelector('#upcoming-movie-genre');\n  const genreText = genreEl.innerText;\n  const genreTwo = genreText.split(',').slice(0, 2);\n   let releaseDate;\n        if (!release_date) {\n          releaseDate = 'no date';\n        } else {\n          releaseDate = release_date.substring(0, 4);\n        }\n        let path = `https://image.tmdb.org/t/p/w500${poster_path}`;\n        if (!poster_path) {\n          path = 'https://picsum.photos/500/750';\n        }\n      let rating = vote_average.toFixed(1);\n stateButtonUpc.localMarkup = {\n        id: id,\n        str: `<img src='${path}' loading=\"lazy\" alt=\"${overview}\" class=\"card__img\" />\n            <div class=\"container-info\">\n            <h2 class=\"card__title\">${original_title}</h2>\n            <p class=\"card__desc\">${genreTwo} | ${releaseDate}</p>\n            <p class=\"card__rating\">${rating}</p>\n            </div>`\n    };\n  console.log(stateButtonUpc.localMarkup);\n\n  \n};\n\nconst hideLoadingMessage = () =>\n  loadingMessageEl.classList.add('upcoming__status-message--hidden');\n\nconst showNoDataMessage = () =>\n  noDataMessageEl.classList.remove('upcoming__status-message--hidden');\n\nconst showErrorMessage = () =>\n  errorMessageEl.classList.remove('upcoming__status-message--hidden');\n\nconst showMovie = () => {\n  movieEl.classList.remove('upcoming__movie--hidden');\n};\n\nconst fillReleaseDate = value => {\n  const releaseDate = document.querySelector('#upcoming-movie-release-date');\n  const originalDate = new Date(value);\n  const formattedDate = originalDate.toLocaleDateString().replace(/\\//g, '.');\n\n  releaseDate.innerText = formattedDate;\n};\n\nconst fillVote = (voteAverage, voteCount) => {\n  const voteAverageEl = document.querySelector('#upcoming-vote-average');\n  const voteCountEl = document.querySelector('#upcoming-vote-count');\n\n  voteAverageEl.innerText = voteAverage;\n  voteCountEl.innerText = voteCount;\n};\n\nconst fillPopularity = value => {\n  const popularity = document.querySelector('#upcoming-movie-popularity');\n\n  popularity.innerText = value.toFixed(1);\n};\n\nconst fillGenre = async movie => {\n  const genreEl = document.querySelector('#upcoming-movie-genre');\n\n  const genres = await requestServer.movieGenre();\n\n  const currentMovieGenres = genres\n    ? movie.genre_ids.map(id =>\n        genres.data.genres.find(genre => genre.id === id)\n      )\n    : [];\n\n  const genresString = currentMovieGenres.map(genre => genre.name).join(', ');\n\n  genreEl.innerText = genresString || '-';\n};\n\nconst fillAbout = value => {\n  const about = document.querySelector('#upcoming-movie-about');\n\n  about.innerText = value;\n};\n\nconst fillTitle = value => {\n  const title = document.querySelector('#upcoming-movie-title');\n\n  title.innerText = value;\n};\n\nconst fillBackdrop = async backdropPath => {\n  const img = document.querySelector('#upcoming-movie-backdrop');\n\n  img.src = `https://image.tmdb.org/t/p/original${backdropPath}`;\n};\n\nfetchUpcoming();\n\nconsole.log(currenyMovie);\n\n\n\n\nfunction checkMovieLocalStorage(idFilm) {\n    const currentState = getMovieList(KEY_MOVIE_LIST);\n    // console.log(currentState);\n    if (!currentState) {\n        // const filmIndex = currentState.findIndex(obj => obj.id === Number(id));\n        btn.textContent = stateButtonUpc.addText;\n        stateButtonUpc.currentStateButton = true;\n        // console.log(filmIndex);\n        // console.log(stateButton.addText);\n        return;\n    }\n    // const [idLocalArray] = Object.keys(currentState);\n     filmIndex = currentState.findIndex(obj => obj.id === idFilm);\n   \n    // console.log(filmIndex);\n        if (filmIndex !== -1) {\n        btn.textContent = stateButtonUpc.removeText;\n        stateButtonUpc.currentStateButton = false;\n       \n        // console.log(stateButton.removeText);\n        } else {\n        btn.textContent = stateButtonUpc.addText;\n        stateButtonUpc.currentStateButton = true;\n        // console.log(filmIndex);\n        // console.log(stateButton.addText); \n  }\n}\nif (btn) {\n  btn.addEventListener('click', onLoadLocalStorage);\n}\n     \nfunction onLoadLocalStorage(event) {\n   \n    console.log(stateButtonUpc.currentStateButton);\n    if (stateButtonUpc.currentStateButton) {\n        loadMoveList(stateButtonUpc.localMarkup);\n        stateButtonUpc.currentStateButton = false;\n        btn.textContent = stateButtonUpc.removeText;\n        console.log('add');\n    } else {\n        deleteLocalFilm(filmIndex);\n        stateButtonUpc.currentStateButton = true;\n        btn.textContent = stateButtonUpc.addText;\n        console.log('remove');\n        // checkLocalStorage(KEY_MOVIE_LIST);\n    }\n}\n\n\nfunction deleteLocalFilm(index) {\n    const currentState = getMovieList(KEY_MOVIE_LIST);\n    if (currentState.length === 1) {\n        localStorage.removeItem(KEY_MOVIE_LIST);\n        return;\n    }\n  currentState.splice(index, 1);\n  saveMovieList(KEY_MOVIE_LIST, currentState);\n  // checkLocalStorage();\n} "],"names":["$6fa7327f1ccc044f$var$requestServer","$hY6V0","parcelRequire","RequestServer","async","response","trendingDay","console","log","error","$6fa7327f1ccc044f$var$test","menu","document","querySelector","openMenuBtn","closeMenuBtn","toggleMenu","classList","toggle","addEventListener","$65414923e0a79c46$var$loadingMessageEl","$65414923e0a79c46$var$noDataMessageEl","$65414923e0a79c46$var$errorMessageEl","$65414923e0a79c46$var$movieEl","$65414923e0a79c46$var$btn","$65414923e0a79c46$var$requestServer","$65414923e0a79c46$var$filmIndex","$65414923e0a79c46$var$stateButtonUpc","addText","removeText","localMarkup","currentStateButton","$65414923e0a79c46$var$fillData","movies","data","results","moviesLength","length","$65414923e0a79c46$var$hideLoadingMessage","$65414923e0a79c46$var$showNoDataMessage","movie","Math","round","random","id","$65414923e0a79c46$var$fillTitle","original_title","$65414923e0a79c46$var$fillBackdrop","backdrop_path","$65414923e0a79c46$var$fillReleaseDate","release_date","$65414923e0a79c46$var$fillVote","vote_average","vote_count","$65414923e0a79c46$var$fillPopularity","popularity","$65414923e0a79c46$var$fillGenre","$65414923e0a79c46$var$fillAbout","overview","poster_path","idFilm","currentState","$31u3U","getMovieList","KEY_MOVIE_LIST","textContent","findIndex","obj","$65414923e0a79c46$var$checkMovieLocalStorage","genreTwo","innerText","split","slice","releaseDate","substring","path","rating","toFixed","str","add","remove","$65414923e0a79c46$var$showErrorMessage","$65414923e0a79c46$var$showMovie","value","formattedDate","Date","toLocaleDateString","replace","voteAverage","voteCount","voteAverageEl","voteCountEl","genreEl","genres","movieGenre","genresString","genre_ids","map","find","genre","name","join","backdropPath","src","newFilms","$65414923e0a79c46$var$fetchUpcoming","$65414923e0a79c46$var$currenyMovie","event","loadMoveList","index","localStorage","removeItem","splice","saveMovieList","$65414923e0a79c46$var$deleteLocalFilm"],"version":3,"file":"index.d61961ed.js.map"}