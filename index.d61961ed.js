var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},o={},n=e.parcelRequire1827;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in o){var n=o[e];delete o[e];var r={id:e,exports:{}};return t[e]=r,n.call(r.exports,r,r.exports),r.exports}var c=new Error("Cannot find module '"+e+"'");throw c.code="MODULE_NOT_FOUND",c}).register=function(e,t){o[e]=t},e.parcelRequire1827=n);const r=new(0,(c=n("hY6V0")).RequestServer);!async function(){try{const e=await r.trendingDay();console.log(e)}catch(e){console.error(e)}}(),n("bTcpz"),n("hYpm4"),(()=>{const e=document.querySelector(".js-menu-container"),t=document.querySelector(".js-open-menu"),o=document.querySelector(".js-close-menu");function n(){e.classList.toggle("visually-hidden")}t.addEventListener("click",n),o.addEventListener("click",n)})(),n("eEHR3"),n("iagwT");var c=n("hY6V0"),i=n("31u3U");n("31u3U"),n("31u3U"),i=n("31u3U");const a=document.querySelector("#upcoming-loading-message"),s=document.querySelector("#upcoming-no-data-message"),u=document.querySelector("#upcoming-error-message"),l=document.querySelector("#upcoming-movie"),d=document.querySelector("#upcoming-remind-btn"),m=new(0,c.RequestServer);let g;const p={addText:"Remind me",removeText:"Delete from my library",localMarkup:"",currentStateButton:!0},v=async e=>{const t=e.data.results,o=t.length;if(!o)return _(),void y();const n=t[Math.round(Math.random()*(o-1))];console.log(n.id),L(n.original_title),M(n.backdrop_path),x(n.release_date),h(n.vote_average,n.vote_count),T(n.popularity),await q(n),w(n.overview);const{poster_path:r,original_title:c="",overview:a="",release_date:s="",vote_average:u="",id:l}=n;!function(e){const t=(0,i.getMovieList)(i.KEY_MOVIE_LIST);if(!t)return d.textContent=p.addText,void(p.currentStateButton=!0);g=t.findIndex((t=>t.id===e)),-1!==g?(d.textContent=p.removeText,p.currentStateButton=!1):(d.textContent=p.addText,p.currentStateButton=!0)}(l);const m=document.querySelector("#upcoming-movie-genre").innerText.split(",").slice(0,2);let v;v=s?s.substring(0,4):"no date";let S=`https://image.tmdb.org/t/p/w500${r}`;r||(S="https://picsum.photos/500/750");let f=u.toFixed(1);p.localMarkup={id:l,str:`<img src='${S}' loading="lazy" alt="${a}" class="card__img" />\n            <div class="container-info">\n            <h2 class="card__title">${c}</h2>\n            <p class="card__desc">${m} | ${v}</p>\n            <p class="card__rating">${f}</p>\n            </div>`},console.log(p.localMarkup)},_=()=>a.classList.add("upcoming__status-message--hidden"),y=()=>s.classList.remove("upcoming__status-message--hidden"),S=()=>u.classList.remove("upcoming__status-message--hidden"),f=()=>{l.classList.remove("upcoming__movie--hidden")},x=e=>{const t=document.querySelector("#upcoming-movie-release-date"),o=new Date(e).toLocaleDateString().replace(/\//g,".");t.innerText=o},h=(e,t)=>{const o=document.querySelector("#upcoming-vote-average"),n=document.querySelector("#upcoming-vote-count");o.innerText=e,n.innerText=t},T=e=>{document.querySelector("#upcoming-movie-popularity").innerText=e.toFixed(1)},q=async e=>{const t=document.querySelector("#upcoming-movie-genre"),o=await m.movieGenre(),n=(o?e.genre_ids.map((e=>o.data.genres.find((t=>t.id===e)))):[]).map((e=>e.name)).join(", ");t.innerText=n||"-"},w=e=>{document.querySelector("#upcoming-movie-about").innerText=e},L=e=>{document.querySelector("#upcoming-movie-title").innerText=e},M=async e=>{document.querySelector("#upcoming-movie-backdrop").src=`https://image.tmdb.org/t/p/original${e}`};(async()=>{try{const e=await m.newFilms();await v(e),_(),f()}catch(e){console.error(e),_(),S()}})(),console.log(undefined),d&&d.addEventListener("click",(function(e){console.log(p.currentStateButton),p.currentStateButton?((0,i.loadMoveList)(p.localMarkup),p.currentStateButton=!1,d.textContent=p.removeText,console.log("add")):(!function(e){const t=(0,i.getMovieList)(i.KEY_MOVIE_LIST);if(1===t.length)return void localStorage.removeItem(i.KEY_MOVIE_LIST);t.splice(e,1),(0,i.saveMovieList)(i.KEY_MOVIE_LIST,t)}(g),p.currentStateButton=!0,d.textContent=p.addText,console.log("remove"))})),n("jIklc"),n("8Yq9A");
//# sourceMappingURL=index.d61961ed.js.map
