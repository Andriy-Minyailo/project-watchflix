var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},a={},r=e.parcelRequire1827;null==r&&((r=function(e){if(e in t)return t[e].exports;if(e in a){var r=a[e];delete a[e];var s={id:e,exports:{}};return t[e]=s,r.call(s.exports,s,s.exports),s.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){a[e]=t},e.parcelRequire1827=r),r("bTcpz"),r("hYpm4");var s=r("hY6V0"),o=r("3huUq"),n=r("7o4ng");const c={cardContainer:document.querySelector(".card")},l=new(0,s.RequestServer);!async function(){try{await(0,n.requestGenre)();const e=await l.trendingWeek(),{results:t}=e.data,a=(0,o.markup)(t);c.cardContainer.innerHTML=a}catch(e){console.log(e)}}(),r("eEHR3"),r("jIklc");o=r("3huUq");const i=new(0,(s=r("hY6V0")).RequestServer),d=document.querySelector("#catalog-search-form"),u=document.querySelector("#catalog-search-input"),h=document.querySelector("#catalog-year-select"),m=document.querySelector("#catalog-genre-select"),y=document.querySelector("#catalog-country-select"),g=document.querySelector("#catalog-list"),v=document.querySelector("#catalog-not-found-message"),f=document.querySelector("#catalog-error-message");let p={searchQuery:void 0,year:void 0,genre:void 0,country:void 0};const w={hideClassName:"catalog__list--hidden",show(){g.classList.remove(this.hideClassName)},hide(){g.classList.add(this.hideClassName)}},q={hideClassName:"catalog__message--hidden",show(){v.classList.remove(this.hideClassName)},hide(){v.classList.add(this.hideClassName)}},L={hideClassName:"catalog__message--hidden",show(){f.classList.remove(this.hideClassName)},hide(){f.classList.add(this.hideClassName)}},S=(e,t,a)=>{const r=document.createElement("option");r.value=t,r.innerHTML=a??t,e.append(r)},C=async e=>{try{const t=(e=>{const t=e.searchQuery,a=e.year,r=e.genre,s=e.country;let o="";return t&&(o+=t),a&&(o+=`&year=${a}`),r&&(o+=`&genre=${r}`),s&&(o+=`&country=${s}`),o})(e);return(await i.searchMovies(t)).data.results}catch(e){console.log(e),w.hide(),L.show()}},N=async e=>{if(e.length){const t=(0,o.markup)(e);L.hide(),q.hide(),g.innerHTML=t,w.show()}else w.hide(),q.show()};(()=>{for(let e=(new Date).getFullYear();e>=2e3;e--)S(h,e)})(),(async()=>{(await i.movieGenre()).data.genres.forEach((e=>S(m,e.id,e.name)))})(),d.addEventListener("submit",(async e=>{e.preventDefault(),p={searchQuery:u.value,year:document.querySelector("#catalog-year-select").value,genre:document.querySelector("#catalog-genre-select").value,country:document.querySelector("#catalog-country-select").value};const t=await C(p);(()=>{const e="catalog__search-form-input--hidden";h.classList.remove(e),m.classList.remove(e),y.classList.remove(e)})(),N(t)}));
//# sourceMappingURL=catalog.baa3ce1a.js.map
